<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h1 class="fw-bold mb-1">
      <i class="bi bi-geo-alt-fill text-danger me-2"></i>Destinations
    </h1>
    <p class="text-muted mb-0">Explore the best climbing and hiking spots</p>
  </div>
</div>

<!-- Filter Buttons -->
<div class="mb-4">
  <div class="btn-group" role="group">
    <%= link_to destinations_path, class: "btn #{params[:activity_type].blank? ? 'btn-primary' : 'btn-outline-primary'}" do %>
      <i class="bi bi-grid me-1"></i> All
    <% end %>
    <%= link_to destinations_path(activity_type: "climbing"), class: "btn #{params[:activity_type] == 'climbing' ? 'btn-warning' : 'btn-outline-warning'}" do %>
      <i class="bi fa-solid fa-hand-fist me-1"></i> Climbing
    <% end %>
    <%= link_to destinations_path(activity_type: "hiking"), class: "btn #{params[:activity_type] == 'hiking' ? 'btn-success' : 'btn-outline-success'}" do %>
      <i class="bi fa-solid fa-person-hiking me-1"></i> Hiking
    <% end %>
  </div>
</div>

<div class="row g-4">
  <% @destinations.each do |destination| %>
    <div class="col-md-6 col-lg-4">
      <%= link_to destination, class: "text-decoration-none" do %>
        <div class="card destination-card h-100">
          <div class="destination-image position-relative" style="height: 200px; overflow: hidden;">
            <% if destination.image_url.present? %>
              <img src="<%= destination.image_url %>" alt="<%= destination.name %>" style="width: 100%; height: 100%; object-fit: cover;">
            <% else %>
              <div class="<%= destination.climbing? ? 'climbing-bg' : 'hiking-bg' %> h-100 d-flex align-items-center justify-content-center">
                <i class="bi <%= destination.climbing? ? 'fa-solid fa-hand-fist' : 'fa-solid fa-person-hiking' %>" style="font-size: 4rem; color: rgba(255,255,255,0.8);"></i>
              </div>
            <% end %>
            <% if destination.difficulty_level.present? %>
              <span class="difficulty-badge badge bg-dark position-absolute" style="top: 12px; right: 12px;">
                <i class="bi bi-speedometer2 me-1"></i><%= destination.difficulty_level %>
              </span>
            <% end %>
            <span class="badge <%= destination.climbing? ? 'bg-warning' : 'bg-success' %> position-absolute" style="bottom: 12px; left: 12px;">
              <i class="bi <%= destination.climbing? ? 'fa-solid fa-hand-fist' : 'fa-solid fa-person-hiking' %> me-1"></i>
              <%= destination.activity_type.capitalize %>
            </span>
          </div>
          <div class="card-body">
            <h5 class="card-title fw-bold text-dark mb-2"><%= destination.name %></h5>
            <p class="card-text text-muted small mb-2">
              <i class="bi bi-geo-alt me-1"></i><%= destination.address %>
            </p>
            <% if destination.description.present? %>
              <p class="card-text small text-dark"><%= truncate(destination.description, length: 100) %></p>
            <% end %>
          </div>
          <div class="card-footer bg-transparent">
            <span class="btn btn-primary btn-sm w-100">
              <i class="bi bi-arrow-right me-1"></i> View Details
            </span>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
</div>

<% if @destinations.empty? %>
  <div class="card">
    <div class="card-body text-center py-5">
      <i class="bi bi-geo-alt text-muted" style="font-size: 4rem;"></i>
      <h4 class="mt-3">No Destinations Found</h4>
      <p class="text-muted">No destinations match your filter criteria.</p>
    </div>
  </div>
<% end %>
